{"version":3,"sources":["App/components/Report/OneStop.js"],"names":["OneStop","t","useTranslation","dispatch","useDispatch","useState","selectedDate","handleDateChange","Date","selectedDate2","handleDateChange2","checked","setChecked","useSelector","state","loading","dashboard","periodicStat","establishment","currentStat","useRef","precedentStat","divToPrint","useEffect","length","fetchEstablishment","differenceInCalendarDays","periodicCount","sDate","eDate","then","useMemo","current","StatsTables","style","padding","borderRadius","marginBottom","background","component","Paper","scope","align","color","urban_rejectedNum","rural_rejectedNum","desert_rejectedNum","urban_livrePrepared","rural_livrePrepared","desert_livrePrepared","urban_ilotNumFinal","rural_ilotNumFinal","desert_ilotNumFinal","urban_ilotNum","rural_ilotNum","desert_ilotNum","urban_livreDelivered","rural_livreDelivered","desert_livreDelivered","printStat","useReactToPrint","content","md","Header","Title","as","Body","variant","margin","orientation","fullWidth","autoOk","disableFuture","value","onChange","inputVariant","invalidDateMessage","label","format","placeholder","display","justifyContent","alignItems","title","size","backgroundColor","onClick","hidden","in","id","ref","marginTop","textAlign","fontWeight","textDecoration","wilaya","commune"],"mappings":"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","file":"static/js/17.afbfbbfe.chunk.js","sourcesContent":["import React, {useEffect, useMemo, useRef, useState} from \"react\"\nimport {useTranslation} from \"react-i18next\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {fetchEstablishment, periodicCount} from \"../Dashboard/DashboardSlice\";\nimport {differenceInCalendarDays, format} from \"date-fns\";\nimport Typography from \"@material-ui/core/Typography\";\nimport {\n    CircularProgress,\n    Collapse,\n    Table,\n    TableBody,\n    TableCell,\n    TableContainer,\n    TableHead,\n    TableRow\n} from \"@material-ui/core\";\nimport Paper from \"@material-ui/core/Paper\";\nimport {useReactToPrint} from \"react-to-print\";\nimport Aux from \"../../../hoc/_Aux\";\nimport {Card, Col, Row} from \"react-bootstrap\";\nimport {DatePicker} from \"@material-ui/pickers\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport Fab from \"@material-ui/core/Fab\";\nimport {PrintRounded} from \"@material-ui/icons\";\n\nconst OneStop = () =>{\n    const {t} = useTranslation()\n    const dispatch = useDispatch()\n    const [selectedDate, handleDateChange] = useState(null)\n    const [selectedDate2, handleDateChange2] = useState(new Date())\n    const [checked, setChecked] = useState(false);\n    const {loading, periodicStat, establishment} = useSelector((state) => ({\n        loading: state.dashboard.loading,\n        periodicStat: state.dashboard.periodicStat,\n        establishment: state.dashboard.establishment\n    }));\n    const currentStat = useRef()\n    const precedentStat = useRef()\n    const divToPrint = useRef()\n\n    useEffect(() => {\n        establishment.length === 0 && dispatch(fetchEstablishment())\n        if (selectedDate && selectedDate2 && differenceInCalendarDays(selectedDate2, selectedDate) > 0) {\n            dispatch(periodicCount({sDate: selectedDate, eDate: selectedDate2})).then(setChecked(true))\n        }else {\n            setChecked(false)\n        }\n        // eslint-disable-next-line\n    }, [dispatch, selectedDate, selectedDate2, establishment])\n    useMemo(() => {\n        if (periodicStat.length > 0) {\n            currentStat.current = periodicStat[0]\n            precedentStat.current = periodicStat[1]\n        }\n    }, [periodicStat])\n    const StatsTables = () => {\n        return (\n            <>\n                <div style={{padding: 13, borderRadius: 10, marginBottom: 5, background: 'rgb(218 221 225)'}}>\n                    <TableContainer component={Paper}>\n                        <Table aria-label=\"customized table\">\n                            <TableHead>\n                                <TableRow scope=\"row\">\n                                    <TableCell align=\"center\" style={{color: 'black'}}>عدد الملفات التي لا يمكن إعداد بشأنها دفاتر عقارية وخصص لها الرد المبرر قانونا</TableCell>\n                                    <TableCell align=\"center\" style={{color: 'black'}}>عدد الدفاتر العقارية المسلمة</TableCell>\n                                    <TableCell align=\"center\" style={{color: 'black'}}>عدد الدفاتر العقارية المعدة</TableCell>\n                                    <TableCell align=\"center\" style={{color: 'black'}}>عدد الطلبات المقيدة في السجل الخاص</TableCell>\n                                    <TableCell align=\"center\" style={{color: 'black'}}>الوضعية</TableCell>\n                                </TableRow>\n                            </TableHead>\n                            <TableBody>\n                                <TableRow>\n                                    <TableCell align=\"center\" style={{color: 'black'}}>{currentStat.current ? currentStat.current?.urban_rejectedNum + currentStat.current?.rural_rejectedNum + currentStat.current?.desert_rejectedNum:\"\"}</TableCell>\n                                    <TableCell align=\"center\" style={{color: 'black'}}>{currentStat.current ? currentStat.current?.urban_livrePrepared + currentStat.current?.rural_livrePrepared + currentStat.current?.desert_livrePrepared:\"\"}</TableCell>\n                                    <TableCell align=\"center\" style={{color: 'black'}}>{currentStat.current ? currentStat.current?.urban_ilotNumFinal + currentStat.current?.rural_ilotNumFinal + currentStat.current?.desert_ilotNumFinal:\"\"}</TableCell>\n                                    <TableCell align=\"center\" style={{color: 'black'}}>{currentStat.current ? currentStat.current?.urban_ilotNum + currentStat.current?.rural_ilotNum + currentStat.current?.desert_ilotNum:\"\"}</TableCell>\n                                    <TableCell align=\"center\" style={{color: 'black'}}>الحالية</TableCell>\n                                </TableRow>\n                                <TableRow>\n                                    <TableCell align=\"center\" style={{color: 'black'}}>{precedentStat.current ? precedentStat.current?.urban_livreDelivered + precedentStat.current?.rural_livreDelivered + precedentStat.current?.desert_livreDelivered : \"\"}</TableCell>\n                                    <TableCell align=\"center\" style={{color: 'black'}}>{precedentStat.current ? precedentStat.current?.urban_livrePrepared + precedentStat.current?.rural_livrePrepared + precedentStat.current?.desert_livrePrepared : \"\"}</TableCell>\n                                    <TableCell align=\"center\" style={{color: 'black'}}>{precedentStat.current ? precedentStat.current?.urban_ilotNumFinal + precedentStat.current?.rural_ilotNumFinal + precedentStat.current?.desert_ilotNumFinal : \"\"}</TableCell>\n                                    <TableCell align=\"center\" style={{color: 'black'}}>{precedentStat.current ? precedentStat.current?.urban_ilotNum + precedentStat.current?.rural_ilotNum + precedentStat.current?.desert_ilotNum : \"\"}</TableCell>\n                                    <TableCell align=\"center\" style={{color: 'black'}}>السابقة</TableCell>\n                                </TableRow>\n                            </TableBody>\n                        </Table>\n                    </TableContainer>\n                </div>\n            </>\n        )\n    }\n\n    const printStat = useReactToPrint({\n        content: () => divToPrint.current\n    })\n    return (\n        <Aux>\n            <Row>\n                <Col md={6}>\n                    <Card>\n                        <Card.Header>\n                            <Card.Title as='h5'>\n                                {t(\"previous_period\")}\n                            </Card.Title>\n                        </Card.Header>\n                        <Card.Body>\n                            <DatePicker\n                                variant='inline'\n                                margin='normal'\n                                orientation='landscape'\n                                fullWidth\n                                autoOk\n                                disableFuture\n                                value={selectedDate}\n                                onChange={handleDateChange}\n                                inputVariant='filled'\n                                invalidDateMessage={t('must_be_a_date')}\n                                label={t(\"previous_period\")}\n                                format='dd/MM/yyyy'\n                                placeholder='00/00/0000'\n\n                            />\n                        </Card.Body>\n                    </Card>\n                </Col>\n                <Col md={6}>\n                    <Card>\n                        <Card.Header>\n                            <Card.Title as='h5'>\n                                {t(\"current_period\")}\n                            </Card.Title>\n                        </Card.Header>\n                        <Card.Body>\n                            <DatePicker\n                                variant='inline'\n                                margin='normal'\n                                orientation='landscape'\n                                fullWidth\n                                autoOk\n                                disableFuture\n                                value={selectedDate2}\n                                onChange={handleDateChange2}\n                                inputVariant='filled'\n                                invalidDateMessage={t('must_be_a_date')}\n                                label={t(\"current_period\")}\n                                format='dd/MM/yyyy'\n                                placeholder='00/00/0000'\n\n                            />\n                        </Card.Body>\n                    </Card>\n                </Col>\n                <Col md={12}>\n                    <Card>\n                        <Card.Header style={{display: 'flex', justifyContent: 'space-between',alignItems:'center'}}>\n                            <Card.Title as='h5'>\n                                {t(\"Report\")}\n                            </Card.Title>\n                            <Tooltip title={t('printt')}>\n                                <Fab size={\"medium\"} style={{backgroundColor: 'green', color: \"white\"}}\n                                     aria-label=\"print\" onClick={printStat} hidden={!checked}>\n                                    <PrintRounded/>\n                                </Fab>\n                            </Tooltip>\n                        </Card.Header>\n                        <Card.Body>\n                            <Collapse in={checked}>\n                                {loading ? <CircularProgress/> : <StatsTables/>}\n                            </Collapse>\n                            <div id='printDiv' style={{display: 'none'}}>\n                                <div ref={divToPrint} style={{padding: 20}}>\n                                    <style>\n                                        {`@media print {@page { size: A4; }}`}\n                                    </style>\n                                    <Typography\n                                        style={{marginTop: 1, textAlign: 'center', marginBottom: 1, color: 'black',fontWeight:'bold'}}\n                                        variant=\"h6\"><span\n                                        style={{textDecoration: 'underline'}}>الجمهورية الجزائرية الديمقراطية الشعبية</span></Typography>\n                                    <Typography\n                                        style={{marginTop: 1, textAlign: 'center', marginBottom: 1, color: 'black',fontWeight:'bold'}}\n                                        variant=\"h6\"><span\n                                        style={{textDecoration: 'underline'}}>وزارة الـمـالـيـة</span></Typography>\n\n                                    <Typography\n                                        style={{marginTop: 1, textAlign: 'right', marginBottom: 1, color: 'black'}}\n                                        variant=\"h6\"><span\n                                        style={{textDecoration: 'underline'}}>المديرية العامة للأملاك الوطنية</span></Typography>\n                                    <Typography\n                                        style={{marginTop: 1, textAlign: 'right', marginBottom: 1, color: 'black'}}\n                                        variant=\"h6\"><span\n                                        style={{textDecoration: 'underline'}}>مديرية مسح الأراضي والحفظ العقاري لولاية {establishment.wilaya}</span></Typography>\n                                    <Typography\n                                        style={{marginTop: 1, textAlign: 'right', marginBottom: 1, color: 'black'}}\n                                        variant=\"h6\"><span\n                                        style={{textDecoration: 'underline'}}>المحافظة العقارية {establishment.commune}</span></Typography>\n                                    <Typography style={{\n                                        marginTop: 1,\n                                        textAlign: 'center',\n                                        marginBottom: 1,\n                                        fontWeight: 'bold',\n                                        color: 'black'\n                                    }} variant=\"h6\">عمليــات إعـــداد وتسلـيــم الدفــاتــر العقـــاريــة</Typography>\n                                    <Typography\n                                        style={{marginTop: 1, textAlign: 'center', marginBottom: 25, color: 'black'}}\n                                        variant=\"h6\">الفترة من:  {selectedDate && format(selectedDate, \"yyyy/MM/dd\")} إلى:  {format(selectedDate2, \"yyyy/MM/dd\")}\n                                    </Typography>\n                                    <StatsTables/>\n                                </div>\n                            </div>\n\n                        </Card.Body>\n                    </Card>\n                </Col>\n            </Row>\n        </Aux>\n    )\n\n}\nexport default OneStop\n"],"sourceRoot":""}